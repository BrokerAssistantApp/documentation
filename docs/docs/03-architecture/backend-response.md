---
sidebar_position: 3
---

# –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç API

## –û–±—â–∏–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

–ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
- **`success`** ‚Äì —Ñ–ª–∞–≥ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞
- **`message`** ‚Äì –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞
- **`data`** ‚Äì –æ—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –æ—Ç–≤–µ—Ç–∞
- **`error`** ‚Äì –æ–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏
- **`meta`** ‚Äì –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞–≥–∏–Ω–∞—Ü–∏—è)

### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:

```json
{
  "success": true,
  "message": "–õ–æ—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω",
  "data": {
    "id": "uuid",
    "name": "–õ–æ—Ç 1",
    "status": "purchased"
  },
  "error": null,
  "meta": null
}
```

### –ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏:

```json
{
  "success": false,
  "message": "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏",
  "data": null,
  "error": {
    "code": 400,
    "message": "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ",
    "details": [
      {
        "field": "email",
        "message": "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email"
      },
      {
        "field": "password",
        "message": "–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 8 —Å–∏–º–≤–æ–ª–æ–≤"
      }
    ]
  },
  "meta": null
}
```

---

## üìå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ message –∏ details

### 1. message (–≥–ª–∞–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)
- –í—Å–µ–≥–¥–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ **–ª—é–±—ã—Ö** –æ—Ç–≤–µ—Ç–∞—Ö.
- –í —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö —Å–æ–æ–±—â–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ (`–õ–æ—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω`).
- –í –æ—à–∏–±–∫–∞—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç **–≥–ª–∞–≤–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–±–ª–µ–º–µ** (`–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏`, `–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω`).

### 2. error.message (–¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–∫–∏)
- –î–∞—ë—Ç **–±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ**, –Ω–∞–ø—Ä–∏–º–µ—Ä: `–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ`.
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è **–ª–æ–≥–æ–≤ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏**.

### 3. error.details (—Å–ø–∏—Å–æ–∫ –æ—à–∏–±–æ–∫)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —Å–ª–æ–∂–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö**.
- –°–æ–¥–µ—Ä–∂–∏—Ç **—Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤** `{ field, message }`, –≥–¥–µ:
    - `field` ‚Äî –∏–º—è –ø–æ–ª—è, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—à–∏–±–∫–∞.
    - `message` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è.

---

## –ü—Ä–∏–Ω—Ü–∏–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

| –ö–æ–¥                         | –û–ø–∏—Å–∞–Ω–∏–µ                  |
|-----------------------------|---------------------------|
| `200 OK`                    | –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å           |
| `201 Created`               | –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞ |
| `400 Bad Request`           | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏          |
| `401 Unauthorized`          | –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏     |
| `403 Forbidden`             | –û—à–∏–±–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞       |
| `404 Not Found`             | –û–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω          |
| `500 Internal Server Error` | –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞            |

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API-–æ—Ç–≤–µ—Ç–æ–≤

| –ü–æ–ª–µ      | –¢–∏–ø                       | –û–ø–∏—Å–∞–Ω–∏–µ                                        |
|-----------|---------------------------|-------------------------------------------------|
| `success` | `boolean`                 | –§–ª–∞–≥ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞                         |
| `message` | `string`                  | –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞             |
| `data`    | `object \| array \| null` | –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞                          |
| `error`   | `object \| null`          | –û–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏                                   |
| `meta`    | `object \| null`          | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–∞–≥–∏–Ω–∞—Ü–∏—è) |

---

## –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ API

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥

```json
{
  "success": true,
  "message": "–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥",
  "data": {
    "token": "jwt-—Ç–æ–∫–µ–Ω",
    "user": {
      "id": "uuid",
      "email": "user@example.com",
      "name": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
      "is_broker": true
    }
  },
  "error": null,
  "meta": null
}
```

#### ‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

```json
{
  "success": false,
  "message": "–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏",
  "data": null,
  "error": {
    "code": 401,
    "message": "–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å"
  },
  "meta": null
}
```

### 2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

#### ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

```json
{
  "success": true,
  "message": "–î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω—ã",
  "data": {
    "id": "uuid",
    "email": "user@example.com",
    "name": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
    "is_broker": true,
    "created_at": "2024-03-24T12:00:00Z"
  },
  "error": null,
  "meta": null
}
```

#### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è

```json
{
  "success": true,
  "message": "–ü—Ä–æ—Ñ–∏–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—ë–Ω",
  "data": {
    "id": "uuid",
    "name": "–ù–æ–≤–æ–µ –∏–º—è"
  },
  "error": null,
  "meta": null
}
```

#### ‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

```json
{
  "success": false,
  "message": "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏",
  "data": null,
  "error": {
    "code": 400,
    "message": "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ",
    "details": [
      {
        "field": "name",
        "message": "–ò–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –º–µ–Ω–µ–µ 2 —Å–∏–º–≤–æ–ª–æ–≤"
      }
    ]
  },
  "meta": null
}
```

### 3. –õ–æ—Ç—ã

#### ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ª–æ—Ç–æ–≤

```json
{
  "success": true,
  "message": "–°–ø–∏—Å–æ–∫ –ª–æ—Ç–æ–≤ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω",
  "data": [
    {
      "id": "uuid",
      "name": "–õ–æ—Ç 1",
      "status": "purchased",
      "purchase_price": 150000.00,
      "sale_price": 200000.00,
      "created_at": "2024-03-23T12:00:00Z"
    },
    {
      "id": "uuid2",
      "name": "–õ–æ—Ç 2",
      "status": "listed_for_sale",
      "purchase_price": 250000.00,
      "sale_price": 300000.00,
      "created_at": "2024-03-24T12:00:00Z"
    }
  ],
  "error": null,
  "meta": {
    "page": 1,
    "total_pages": 10,
    "total_items": 100
  }
}
```

#### ‚ùå –õ–æ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

```json
{
  "success": false,
  "message": "–û—à–∏–±–∫–∞",
  "data": null,
  "error": {
    "code": 404,
    "message": "–õ–æ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω"
  },
  "meta": null
}
```

### 4. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

#### ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

```json
{
  "success": true,
  "message": "–°–ø–∏—Å–æ–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω",
  "data": [
    {
      "id": "uuid",
      "lot_id": "uuid",
      "user_id": "uuid",
      "type": "investment",
      "amount": 50000.00,
      "created_at": "2024-03-24T12:00:00Z"
    }
  ],
  "error": null,
  "meta": {
    "page": 1,
    "total_pages": 5,
    "total_items": 50
  }
}
```

#### ‚ùå –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞

```json
{
  "success": false,
  "message": "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω",
  "data": null,
  "error": {
    "code": 403,
    "message": "–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"
  },
  "meta": null
}
```

---

## –ö–∞–∫ —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ?
```ts
function createResponse(success: boolean, message: string, data: any = null, error: any = null, meta: any = null) {
  return { success, message, data, error, meta };
}

// ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
res.status(201).json(createResponse(true, "–õ–æ—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω", { id: "uuid", name: "–õ–æ—Ç 1" }));

// ‚ùå –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
res.status(400).json(createResponse(false, "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏", null, {
  code: 400,
  message: "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ",
  details: [
    { field: "email", message: "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email" },
    { field: "password", message: "–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 8 —Å–∏–º–≤–æ–ª–æ–≤" }
  ]
}));
```

